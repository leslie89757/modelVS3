# ğŸ” ModelVS3 æœåŠ¡è·¯ç”±å…³ç³»åˆ†ææŠ¥å‘Š

## ğŸ“Š **å½“å‰æœåŠ¡çŠ¶æ€**

### **æœ¬æœºå¼€å‘ç¯å¢ƒ (192.168.3.20)**
```
âœ… å‰ç«¯æœåŠ¡: localhost:3003 (Docker: modelvs3-frontend-1)
âœ… APIæœåŠ¡:  localhost:8000 (Docker: modelvs3-api-1)
âœ… æ•°æ®åº“:   localhost:5432 (Docker: modelvs3-postgres-1)
âœ… Redis:    localhost:6379 (Docker: modelvs3-redis-1)
âœ… Grafana:  localhost:3001
âœ… Prometheus: localhost:9090
```

### **è¿œç¨‹ç”Ÿäº§ç¯å¢ƒ (192.168.3.27)**
```
âœ… å‰ç«¯æœåŠ¡: 192.168.3.27:3003 (å¯è®¿é—®)
âœ… APIæœåŠ¡:  192.168.3.27:8000 (å¯è®¿é—®)
ğŸ”¶ æ•°æ®åº“:   192.168.3.27:5432 (å†…éƒ¨è®¿é—®)
ğŸ”¶ Redis:    192.168.3.27:6379 (å†…éƒ¨è®¿é—®)
```

## ğŸš¨ **å‘ç°çš„è·¯ç”±é—®é¢˜**

### **1. å½“å‰é…ç½®åˆ†æ**
```bash
# æœ¬æœºå‰ç«¯é…ç½®
VITE_API_URL=http://localhost:8000  âœ… æ­£ç¡®æŒ‡å‘æœ¬æœºAPI

# ä½†å­˜åœ¨çš„é—®é¢˜ï¼š
1. ä¸¤ä¸ªæœåŠ¡åŒæ—¶è¿è¡Œå¯èƒ½å¯¼è‡´æ··ä¹±
2. æµè§ˆå™¨å¯èƒ½åŒæ—¶è®¿é—®ä¸¤ä¸ªæœåŠ¡
3. æ•°æ®ä¸åŒæ­¥ï¼ˆä¸åŒçš„æ•°æ®åº“ï¼‰
4. å·¥å…·æ³¨å†ŒçŠ¶æ€å¯èƒ½ä¸ä¸€è‡´
```

### **2. æ½œåœ¨æ··ä¹±è°ƒç”¨è·¯å¾„**

#### **åœºæ™¯A: æœ¬æœºå‰ç«¯ â†’ è¿œç¨‹API**
```
æµè§ˆå™¨è®¿é—®: http://localhost:3003
å‰ç«¯å°è¯•è°ƒç”¨: http://localhost:8000 (æœ¬æœºAPI)
ä½†å¦‚æœæœ¬æœºAPIä¸å¯ç”¨ï¼Œå¯èƒ½è¯¯è°ƒç”¨è¿œç¨‹API
```

#### **åœºæ™¯B: è¿œç¨‹å‰ç«¯ â†’ æœ¬æœºAPI**
```
æµè§ˆå™¨è®¿é—®: http://192.168.3.27:3003  
è¿œç¨‹å‰ç«¯å¯èƒ½è¢«é…ç½®ä¸ºè°ƒç”¨: http://192.168.3.20:8000
å¯¼è‡´è·¨ç½‘ç»œçš„ä¸åˆç†è°ƒç”¨
```

#### **åœºæ™¯C: æµè§ˆå™¨ç›´æ¥è®¿é—®**
```
ç”¨æˆ·å¯èƒ½åœ¨æµè§ˆå™¨ä¸­ï¼š
- æ‰“å¼€ http://localhost:3003 (æœ¬æœº)
- åŒæ—¶æ‰“å¼€ http://192.168.3.27:3003 (è¿œç¨‹)
å¯¼è‡´æ•°æ®å’ŒçŠ¶æ€æ··ä¹±
```

## ğŸ”§ **è§£å†³æ–¹æ¡ˆ**

### **æ–¹æ¡ˆ1: æ˜ç¡®ç¯å¢ƒåˆ†ç¦»ï¼ˆæ¨èï¼‰**

#### **ä¿ç•™æœ¬æœºä½œä¸ºå¼€å‘ç¯å¢ƒ**
```bash
# æœ¬æœºç¯å¢ƒé…ç½®
å‰ç«¯: http://localhost:3003
API:  http://localhost:8000
ç”¨é€”: å¼€å‘å’Œæµ‹è¯•

# åœæ­¢æœ¬æœºæœåŠ¡å‘½ä»¤
docker-compose down
```

#### **è¿œç¨‹ä½œä¸ºç”Ÿäº§ç¯å¢ƒ**
```bash
# è¿œç¨‹ç¯å¢ƒé…ç½®
å‰ç«¯: http://192.168.3.27:3003  
API:  http://192.168.3.27:8000
ç”¨é€”: ç”Ÿäº§ä½¿ç”¨

# ç¡®ä¿è¿œç¨‹æœåŠ¡é…ç½®æ­£ç¡®
VITE_API_URL=http://192.168.3.27:8000
```

### **æ–¹æ¡ˆ2: ç«¯å£éš”ç¦»**

#### **æœ¬æœºå¼€å‘ç¯å¢ƒä½¿ç”¨ä¸åŒç«¯å£**
```yaml
# ä¿®æ”¹æœ¬æœº docker-compose.yml
frontend:
  ports:
    - "3004:3000"  # æ”¹ä¸º3004ç«¯å£

api:
  ports:
    - "8001:8000"  # æ”¹ä¸º8001ç«¯å£
```

#### **å¯¹åº”çš„ç¯å¢ƒå˜é‡ä¿®æ”¹**
```bash
# æœ¬æœº .env
VITE_API_URL=http://localhost:8001
```

### **æ–¹æ¡ˆ3: åŸŸåç»‘å®š**

#### **é…ç½®æœ¬åœ°åŸŸå**
```bash
# ç¼–è¾‘ /etc/hosts
echo "127.0.0.1 dev.modelvs3.local" >> /etc/hosts
echo "192.168.3.27 prod.modelvs3.local" >> /etc/hosts
```

#### **ä½¿ç”¨åŸŸåè®¿é—®**
```bash
å¼€å‘ç¯å¢ƒ: http://dev.modelvs3.local:3003
ç”Ÿäº§ç¯å¢ƒ: http://prod.modelvs3.local:3003
```

## ğŸ¯ **æ¨èæ“ä½œæ­¥éª¤**

### **ç¬¬ä¸€æ­¥ï¼šç¡®è®¤å½“å‰ä½¿ç”¨éœ€æ±‚**
```bash
# ç¡®è®¤æ‚¨å½“å‰ä¸»è¦ä½¿ç”¨å“ªä¸ªç¯å¢ƒï¼Ÿ
# A. æœ¬æœºå¼€å‘æµ‹è¯•
# B. è¿œç¨‹ç”Ÿäº§ä½¿ç”¨  
# C. ä¸¤ä¸ªéƒ½éœ€è¦
```

### **ç¬¬äºŒæ­¥ï¼šåœæ­¢ä¸éœ€è¦çš„æœåŠ¡**

#### **å¦‚æœä¸»è¦ä½¿ç”¨è¿œç¨‹æœåŠ¡**
```bash
# åœæ­¢æœ¬æœºæœåŠ¡
cd /Users/guzhenqiang/QIGI/modelVS3
docker-compose down

# åªä¿ç•™è¿œç¨‹æœåŠ¡è¿è¡Œ
# è®¿é—®: http://192.168.3.27:3003
```

#### **å¦‚æœä¸»è¦ä½¿ç”¨æœ¬æœºæœåŠ¡**
```bash
# ä¿æŒæœ¬æœºæœåŠ¡è¿è¡Œ
# åœæ­¢è¿œç¨‹æœåŠ¡
ssh user@192.168.3.27
cd /path/to/modelVS3
docker-compose -f docker-compose.production.yml down
```

### **ç¬¬ä¸‰æ­¥ï¼šæ¸…ç†æµè§ˆå™¨ç¼“å­˜**
```bash
# æ¸…ç†å¯èƒ½çš„ç¼“å­˜æ··ä¹±
1. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
2. å…³é—­æ‰€æœ‰ModelVS3ç›¸å…³æ ‡ç­¾é¡µ
3. é‡æ–°è®¿é—®ç¡®å®šçš„ç¯å¢ƒ
```

### **ç¬¬å››æ­¥ï¼šéªŒè¯è·¯ç”±é…ç½®**

#### **æ£€æŸ¥æœ¬æœºé…ç½®**
```bash
# è¿›å…¥å‰ç«¯å®¹å™¨æ£€æŸ¥
docker-compose exec frontend printenv | grep API_URL

# åº”è¯¥çœ‹åˆ°: VITE_API_URL=http://localhost:8000
```

#### **æ£€æŸ¥è¿œç¨‹é…ç½®**
```bash
# SSHåˆ°è¿œç¨‹æœåŠ¡å™¨
ssh user@192.168.3.27
docker-compose -f docker-compose.production.yml exec frontend printenv | grep API_URL

# åº”è¯¥çœ‹åˆ°: VITE_API_URL=http://192.168.3.27:8000
```

### **ç¬¬äº”æ­¥ï¼šæ•°æ®åŒæ­¥ï¼ˆå¦‚éœ€è¦ï¼‰**

#### **å¦‚æœéœ€è¦æ•°æ®åŒæ­¥**
```bash
# ä»æœ¬æœºå¯¼å‡ºæ•°æ®
docker-compose exec postgres pg_dump -U postgres modelvs3 > local_backup.sql

# ä¼ è¾“åˆ°è¿œç¨‹æœåŠ¡å™¨
scp local_backup.sql user@192.168.3.27:/tmp/

# åœ¨è¿œç¨‹æœåŠ¡å™¨å¯¼å…¥
ssh user@192.168.3.27
docker-compose -f docker-compose.production.yml exec -T postgres psql -U postgres modelvs3 < /tmp/local_backup.sql
```

## ğŸ” **è·¯ç”±éªŒè¯æ¸…å•**

### **éªŒè¯æœ¬æœºæœåŠ¡**
- [ ] è®¿é—® http://localhost:3003 æ­£å¸¸åŠ è½½
- [ ] å‰ç«¯è°ƒç”¨ http://localhost:8000/api/v1/tools æˆåŠŸ
- [ ] ç½‘ç»œè¯·æ±‚éƒ½æŒ‡å‘ localhost
- [ ] æ•°æ®åº“è¿æ¥æœ¬æœºPostgreSQL

### **éªŒè¯è¿œç¨‹æœåŠ¡**  
- [ ] è®¿é—® http://192.168.3.27:3003 æ­£å¸¸åŠ è½½
- [ ] å‰ç«¯è°ƒç”¨ http://192.168.3.27:8000/api/v1/tools æˆåŠŸ
- [ ] ç½‘ç»œè¯·æ±‚éƒ½æŒ‡å‘ 192.168.3.27
- [ ] æ•°æ®åº“è¿æ¥è¿œç¨‹PostgreSQL

### **éªŒè¯éš”ç¦»æ€§**
- [ ] æœ¬æœºæœåŠ¡ä¸ä¼šè°ƒç”¨è¿œç¨‹API
- [ ] è¿œç¨‹æœåŠ¡ä¸ä¼šè°ƒç”¨æœ¬æœºAPI
- [ ] ä¸¤ä¸ªç¯å¢ƒçš„æ•°æ®ç‹¬ç«‹
- [ ] å·¥å…·æ³¨å†ŒçŠ¶æ€åˆ†åˆ«ç®¡ç†

## ğŸ“± **ç›‘æ§å’Œè°ƒè¯•**

### **ç½‘ç»œè¯·æ±‚ç›‘æ§**
```bash
# æœ¬æœºæœåŠ¡ç½‘ç»œè¯·æ±‚ç›‘æ§
docker-compose logs frontend | grep -E "GET|POST"

# è¿œç¨‹æœåŠ¡ç½‘ç»œè¯·æ±‚ç›‘æ§
ssh user@192.168.3.27
docker-compose -f docker-compose.production.yml logs frontend | grep -E "GET|POST"
```

### **å®æ—¶è¿æ¥æ£€æŸ¥**
```bash
# æ£€æŸ¥æœ¬æœºAPIè¿æ¥
watch "curl -s http://localhost:8000/health | jq .timestamp"

# æ£€æŸ¥è¿œç¨‹APIè¿æ¥  
watch "curl -s http://192.168.3.27:8000/health | jq .timestamp"
```

## ğŸ’¡ **æœ€ä½³å®è·µå»ºè®®**

1. **ç¯å¢ƒæ ‡è¯†**: åœ¨é¡µé¢æ·»åŠ ç¯å¢ƒæ ‡è¯†ï¼ˆå¼€å‘/ç”Ÿäº§ï¼‰
2. **ç«¯å£è§„èŒƒ**: å¼€å‘å’Œç”Ÿäº§ä½¿ç”¨ä¸åŒç«¯å£
3. **åŸŸååŒºåˆ†**: ä½¿ç”¨ä¸åŒåŸŸåæˆ–å­åŸŸå
4. **é…ç½®ç®¡ç†**: ä½¿ç”¨ä¸åŒçš„é…ç½®æ–‡ä»¶
5. **ç›‘æ§åˆ†ç¦»**: åˆ†åˆ«ç›‘æ§ä¸¤ä¸ªç¯å¢ƒçš„å¥åº·çŠ¶æ€

---

**è¯·ç¡®è®¤æ‚¨å¸Œæœ›é‡‡ç”¨å“ªç§è§£å†³æ–¹æ¡ˆï¼Œæˆ‘å¯ä»¥å¸®æ‚¨å…·ä½“å®æ–½ï¼** ğŸš€ 